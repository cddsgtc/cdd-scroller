'use strict'; var _typeof = 'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator ? function (a) { return typeof a } : function (a) { return a && 'function' == typeof Symbol && a.constructor === Symbol && a !== Symbol.prototype ? 'symbol' : typeof a }; (function (a, b) { 'object' === ('undefined' == typeof exports ? 'undefined' : _typeof(exports)) && 'undefined' != typeof module ? module.exports = b() : 'function' == typeof define && define.amd ? define(b) : a.scroller = b() })(void 0, function () { 'use strict'; function a(q) { var r = 'undefined' == typeof q ? 'undefined' : _typeof(q); return null != q && ('object' == r || 'function' == r) } function b(q, r, s) { function t(Q) { var R = D, S = E; return D = E = void 0, J = Q, G = q.apply(S, R), G } function u(Q) { return J = Q, H = setTimeout(x, r), K ? t(Q) : G } function v(Q) { var R = Q - I, S = Q - J, T = r - R; return L ? Math.min(T, F - S) : T } function w(Q) { var R = Q - I, S = Q - J; return void 0 === I || R >= r || 0 > R || L && S >= F } function x() { var Q = Date.now(); return w(Q) ? y(Q) : void (H = setTimeout(x, v(Q))) } function y(Q) { return (H = void 0, M && D) ? t(Q) : (D = E = void 0, G) } function C() { for (var T = Date.now(), U = w(T), R = arguments.length, Q = Array(R), S = 0;S < R;S++)Q[S] = arguments[S]; if (D = Q, E = this, I = T, U) { if (void 0 === H) return u(I); if (L) return H = setTimeout(x, r), t(I) } return void 0 === H && (H = setTimeout(x, r)), G } var D, E, F, G, H, I, J = 0, K = !1, L = !1, M = !0; if ('function' != typeof q) throw new TypeError('Expected a function'); return r = +r || 0, a(s) && (K = !!s.leading, L = 'maxWait' in s, F = L ? Math.max(+s.maxWait || 0, r) : F, M = 'trailing' in s ? !!s.trailing : M), C.cancel = function () { void 0 !== H && clearTimeout(H), J = 0, D = I = E = H = void 0 }, C.flush = function () { return void 0 === H ? G : y(Date.now()) }, C.pending = function () { return void 0 !== H }, C } function c(q, r, s) { var t = !0, u = !0; if ('function' != typeof q) throw new TypeError('Expected a function'); return a(s) && (t = 'leading' in s ? !!s.leading : t, u = 'trailing' in s ? !!s.trailing : u), b(q, r, { leading: t, maxWait: r, trailing: u }) } function d(q) { if (null == q) return void 0 === q ? '[object Undefined]' : '[object Null]'; if (!(p && p in Object(q))) return o.call(q); var r = n.call(q, p), s = q[p], t = !1; try { q[p] = void 0, t = !0 } catch (v) { } var u = o.call(q); return t && (r ? q[p] = s : delete q[p]), u } function g(q) { return 'object' == ('undefined' == typeof q ? 'undefined' : _typeof(q)) && null !== q } function h(q) { return 'number' == typeof q || g(q) && '[object Number]' == d(q) } function j(q, r) { if (!(q instanceof r)) throw new TypeError('Cannot call a class as a function') } var m = Object.prototype, n = m.hasOwnProperty, o = m.toString, p = 'undefined' == typeof Symbol ? void 0 : Symbol.toStringTag, k = function () { function q(r, s) { for (var u, t = 0;t < s.length;t++)u = s[t], u.enumerable = u.enumerable || !1, u.configurable = !0, 'value' in u && (u.writable = !0), Object.defineProperty(r, u.key, u) } return function (r, s, t) { return s && q(r.prototype, s), t && q(r, t), r } }(), l = function () { function q(r) { var s = r.fElement, t = void 0 === s ? null : s, u = r.cElement, v = void 0 === u ? null : u, w = r.threshold, x = void 0 === w ? 20 : w, y = r.arrived, z = void 0 === y ? function () { console.log('\u9700\u8981\u6709\u56DE\u8C03\u51FD\u6570') } : y, A = r.unarrived, B = void 0 === A ? null : A, C = r.up, D = void 0 === C ? null : C, E = r.down, F = void 0 === E ? 0 : E, G = r.modal, H = void 0 === G ? 'debounce' : G, I = r.frequency, J = void 0 === I ? 250 : I; j(this, q), this.config = { fElement: t, cElement: v, threshold: x, arrived: z, unarrived: B, up: D, down: F, top: '', modal: H, bottom: '', frequency: J }, this.init() } return k(q, [{ key: 'getBottom', value: function () { var s = [this.config.fElement, this.config.cElement], t = s[0]; if (h(t.scrollTop)) { var u = [Math.max(t.scrollHeight, t.clientHeight), Math.min(t.scrollHeight, t.clientHeight), t.scrollTop], v = u[0], w = u[1], x = u[2]; this.config.bottom = v - w - x, this.config.top = x } } }, { key: 'init', value: function () { var s = this.config; null != s.up && 0 == s.down && (s.down = null), this.addScroller(this.config.modal) } }, { key: 'addScroller', value: function (s) { var t = this; 'throttle' == s ? this.config.fElement.addEventListener('scroll', c(function () { t.getBottom(), t.setCallback() }, t.config.frequency)) : this.config.fElement.addEventListener('scroll', b(function () { t.getBottom(), t.setCallback() }, t.config.frequency)) } }, { key: 'setCallback', value: function () { var s = this.config; h(s.up) && h(s.down) ? s.top <= s.up || s.bottom <= s.down ? s.arrived(s.fElement, s.cElement) : s.unarrived && s.unarrived(s.fElement, s.cElement) : h(s.up) ? s.top <= s.up ? s.arrived(s.fElement, s.cElement) : s.unarrived && s.unarrived(s.fElement, s.cElement) : s.bottom <= s.threshold ? s.arrived(s.fElement, s.cElement) : s.unarrived && s.unarrived(s.fElement, s.cElement) } }]), q }(); return l });